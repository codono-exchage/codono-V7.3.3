<!-- Members of the authorizededitpage -->
<include file="Public:header" />
<div id="main-content">
	<div id="top-alert" class="fixed alert alert-error" style="display: none;">
		<button class="close fixed" style="margin-top: 4px;">&times;</button>
		<div class="alert-content">{:l('Warnings')}</div>
	</div>
	<div id="main" class="main">
		<div class="main-title-h">
			<span class="d-sm-flex align-items-center justify-content-between h4">{:l('Members of the authorized')}</span>
		</div>
		<div class="d-flex flex-wrap gap-2 tomato-1 mb-1">
			<div class="search-form fr cf">
				<div class="sleft">
					<form name="formSearch" id="formSearch" method="get" name="form1" class="d-flex align-items-center">
						<select name="group">
							<volist name="auth_group" id="vo">
								<option value="{:U('AuthManager/user',array('group_id'=>$vo['id'],'group_name'=>$vo['title']))}"
								<eq name="vo['id']" value="$this_group['id']">{:l('selected')}</eq> >{$vo.title}</option>
							</volist>
						</select>

						</a>
					</form>
					<script>
						//Search function
						$(function(){
							$('#search').click(function(){
								$('#formSearch').submit();
							});
						});
						//Enter search
						$(".search-input").keyup(function(e){
							if(e.keyCode===13){
								$("#search").click();
								return false;
							}
						});
					</script>
				</div>
			</div>
		</div>
		<div class="card card-body mt-2 table-responsive">
			<table class="table table-sm emptyx">
				<thead class="table-light">
				<tr>
					<th class="">{:l('ID')}</th>
					<th class="">{:l('username')}</th>
					<th class="">{:l('nickname')}</th>
					<th class="">{:l('last login time')}</th>
					<th class="">{:l('Last LoginIP')}</th>
					<th class="">{:l('Status')}</th>
					<th class="">{:l('Option')}</th>
				</tr>
				</thead>
				<tbody>
				<volist name="_list" id="vo">
					<tr>
						<td>{$vo.id} </td>
						<td>{$vo.username} </td>
						<td>{$vo.nickname}</td>
						<td><span>{$vo.last_login_time|time_format}</span></td>
						<td><span>{$vo.last_login_ip|long2ip}</span></td>
						<td>{$vo.status_text}</td>
						<td><a href="{:U('AuthManager/removeFromGroup?uid='.$vo['id'].'&group_id='.I('group_id'))}"
							   class="ajax-get">{:l('DeAuth')}</a>

						</td>
					</tr>
				</volist>
				</tbody>
			</table>
			<div class="page">
				<div>{$page}</div>
			</div>


			<table class="table table-sm emptyx">
				<form class="add-user" action="{:U('addToGroup')}" method="post" enctype="application/x-www-form-urlencoded" >
					<input class="input-4x" type="text" name="uid" placeholder="Please Enter uid,manyMoreuseEnglishteasenumberSeparated">
					<input type="hidden" name="group_id" value="{:I('group_id')}">
					<button type="submit" class="ajax-post" target-form="add-user"><i class="far fa-edit"></i></button>
				</form>
			</table>

		</div>
	</div>
</div>
<block name="script">
	<script type="text/javascript" charset="utf-8">
		$('select[name=group]').change(function(){
			location.href = this.value;
		});
		//Highlight navigation
		highlight_subnav('{:U('AuthManager/index')}');
	</script>
</block>
<include file="Public:footer" />