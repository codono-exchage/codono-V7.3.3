<include file="Public:header" />
<div id="main-content">
	<div id="top-alert" class="fixed alert alert-error" style="display: none;">
		<button class="close fixed" style="margin-top: 4px;">&times;</button>
		<div class="alert-content">{:l('Warnings')}</div>
	</div>
	<div id="main" class="main">
		<include file="Public:page_title" />
		<script>
			//Search function
			$(function () {
				$('#search').click(function () {
					$('#formSearch').submit();
				});
			});
			//Enter search
			$(".search-input").keyup(function (e) {
				if (e.keyCode === 13) {
					$("#search").click();
					return false;
				}
			});
		</script>

		<div class="card card-body mt-2 table-responsive">
			<div class="d-flex flex-wrap gap-2 tomato-1 mb-1">
				<div>
					<a class="btn btn-success me-2" href="{:U('Config/coinEdit')}">{:l('Add')}</a>
					<button class="btn btn-info me-2 ajax-post" url="{:U('Config/coinStatus',array('type'=>'resume'))}"
						target-form="ids">{:l('Enable')}</button>
					<button class="btn btn-warning me-2 ajax-post"
						url="{:U('Config/coinStatus',array('type'=>'forbid'))}"
						target-form="ids">{:l('Disable')}</button>
					<button class="btn btn-danger me-2 ajax-post confirm"
						url="{:U('Config/coinStatus',array('type'=>'delete'))}" target-form="ids"><i
							class="far fa-trash-alt" title="Delete"></i></button>

				</div>
				<div>
					<form name="formSearch" id="formSearch" method="get" class="d-flex align-items-center">
						<select name="status" class="form-select me-2">
							<option value="" <empty name="Think.get.status">{:l('selected')}</empty>>{:l('All states')}
							</option>
							<option value="1" <eq name="Think.get.status" value="1">{:l('selected')}</eq>
								>{:l('Disabled')}</option>
							<option value="2" <eq name="Think.get.status" value="2">{:l('selected')}</eq>
								>{:l('Enabled')}</option>
						</select>
						<select name="field" class="form-select me-2">
							<option value="name" <eq name="Think.get.field" value="name">{:l('selected')}</eq>
								>{:l('Internal Symbol')}</option>
							<option value="symbol" <eq name="Think.get.field" value="symbol">{:l('selected')}</eq>
								>{:l('Parent Symbol')}</option>
						</select>
						<input type="text" name="name" class="form-control me-2" value="{$Think.get.name}"
							placeholder="Enter text to search">
						<button class="btn btn-primary" type="submit" id="search"><i class="bx bx-search"
								title="Search"></i></button>
					</form>
				</div>
			</div>
			<table class="table table-sm emptyx">
				<thead class="table-light">
					<tr>
						<th class="row-selected row-selected"><input class="check-all" type="checkbox" /></th>
						<th class="d-none d-md-table-cell">{:l('ID')}</th>
						<th class=""></th>

						<th class="">{:l('Unique Symbol')}</th>
						<th class="" title="for [MultiChain]">{:l('Parent Symbol')}{:l('Parent Symbol')}</th>
						<th class="d-none d-md-table-cell">{:l('Title')}</th>
						<th class="d-none d-md-table-cell">{:l('TokenOf')}</th>
						<th class="">{:l('Type')}</th>
						<th class="d-none d-md-table-cell">{:l('Wallet server')}</th>
						<th class="d-none d-md-table-cell">{:l('Withdrawals')}</th>
						<th class="">{:l('Status')}</th>
						<th class="">{:l('Option')}</th>
					</tr>
				</thead>
				<tbody>
					<notempty name="list">
						<volist name="list" id="vo">
							<tr>
								<td><input class="ids" type="checkbox" name="id[]" value="{$vo.id}" /></td>
								<td class="d-none d-md-table-cell">{$vo.id}</td>
								<td><img src="__UPLOAD__/coin/{$vo.img}" height="18px" /></td>
								<td>{$vo.name}</td>
								<td>
									<if condition="$vo.symbol neq ''"><span class="text-warning"
											title="Parent Present">{$vo.symbol|strtoupper}</span>
										<else />{$vo.name|strtoupper}
									</if>
								</td>
								<td class="d-none d-md-table-cell">{$vo.title}</td>
								<td class="d-none d-md-table-cell">{$vo.tokenof}</td>
								<td>
									{$vo.type}
								</td>
								<td class="d-none d-md-table-cell">

									<switch name="vo.type">
										<case value="rgb">{:l('ICO')}</case>
										<case value="rmb">{:l('Fiat')}</case>
										<case value="qbb">
											<eq name="vo.dj_zj" value="0">{:l('Bitcoin Type')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
												<a href="{:U('Config/coinColdTransfer?coin='.$vo['name'])}"
													class="btn btn-sm btn-success">{:l('Cold Transfer')}</a>
												<a href="{:U('Config/coinUser?coin='.$vo['name'])}"
													class="btn btn-sm btn-warning">{:l('All accounts')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>

										</case>
										<case value="esmart">
											<eq name="vo.dj_zj" value="0">{:l('Esmart Type')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
												<a href="{:U('Config/coinColdTransfer?coin='.$vo['name'])}"
													class="btn btn-sm btn-success">{:l('Cold Transfer')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>

										</case>

										<case value="tron">
											<eq name="vo.dj_zj" value="0">{:l('Tron Type')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>

										</case>


										<case value="offline">{:l('Offline Wallet')}</case>
										<case value="blockio">
											<eq name="vo.dj_zj" value="0">{:l('Block.io Type')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>

												<a href="{:U('Config/coinUser?coin='.$vo['name'])}"
													class="btn btn-sm btn-warning">{:l('All accounts')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>
										</case>
										<case value="coinpay">
											<eq name="vo.dj_zj" value="0">{:l('Coinpayments.net')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
												<a href="{:U('Config/coinUser?coin='.$vo['name'])}"
													class="btn btn-sm btn-warning">{:l('All accounts')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>
										</case>
										<case value="waves">
											<eq name="vo.dj_zj" value="0">{:l('Waves Wallet')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
												<a href="{:U('Config/coinUser?coin='.$vo['name'])}"
													class="btn btn-sm btn-warning">{:l('All accounts')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>
										</case>
										<case value="cryptonote">
											<eq name="vo.dj_zj" value="0">{:l('CryptoNote')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('All accounts')}</a>
												<a href="{:U('Config/coinUser?coin='.$vo['name'])}"
													class="btn btn-sm btn-warning">{:l('All accounts')}</a>
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>
										</case>
										<case value="cryptoapis">
											<eq name="vo.dj_zj" value="0">{:l('CryptoApis')}
												<else />
												<button onclick="coinEmpty('{$vo.name}')"
													class="btn btn-sm btn-danger">{:l('Empty address')}</button>
											</eq>
										</case>
										<case value="xrp">
											<eq name="vo.dj_zj" value="0">{:l('XRP')}
												<else />
												<a href="{:U('Config/coinInfo?coin='.$vo['name'])}"
													class="btn btn-sm btn-info">{:l('Wallet info')}</a>
											</eq>
										</case>
										<default />{:l('default')}
									</switch>



								</td>
								<td class="d-none d-md-table-cell">
									<eq name="vo.zc_jz" value="1">
										<font color='Green'><span class="fa fa-check-circle" aria-hidden="true"
												title="Enabled"></span></font>
										<else />
										<font color='red'><span class="fa fa-times-circle" aria-hidden="true"
												title="Disabled"></span></font>
									</eq>
								</td>

								<td>
									<eq name="vo.status" value="1">
										<font color='Green'><span class="fa fa-check-circle" aria-hidden="true"
												title="Enabled"></span></font>
										<else />
										<font color='red'><span class="fa fa-times-circle" aria-hidden="true"
												title="Disabled"></span></font>
									</eq>
								</td>

								<td>
									<a href="{:U('Config/coinEdit?id='.$vo['id'])}" class="btn btn-primary btn-sm"><i
											class="far fa-edit"></i></a>
								</td>
							</tr>
						</volist>
						<else />
						<td colspan="12" class="text-center">{:l('No contents!')}</td>
					</notempty>
				</tbody>
			</table>
			<div class="page">
				<div>{$page}</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	function chk_wallet() {
		window.location.href = "{:U('Tools/wallet')}";
	}

	function coinEmpty(coinname) {
		layer.prompt({
			title: 'Type DELETE to User assigned ' + coinname + ' addresses',
			formType: 4,
			btn: ['Delete', 'Cancle'] //Push button
		}, function (pass, elem) {
			if (!pass || pass != 'DELETE') {
				layer.msg('Type DELETE!');
			} else {

				$.get("coinEmpty?coin=" + coinname, function (data) {
					layer.msg(data.info);
					layer.close();
					if (data.status) {
						window.location.href = "{:U('Config/coin')}";
					}
				}, 'json');
			}
		});

	}
</script>
<include file="Public:footer" />
<block name="script">
	<script type="text/javascript" charset="utf-8">
		//Highlight navigation
		highlight_subnav("{:U('Config/coin')}");
	</script>
</block>