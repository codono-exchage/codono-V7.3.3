<include file="Public:header" />

<div id="main-content">
    <div class="row">
        <div class="col-12">
            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                <h4 class="mb-sm-0 font-size-18">{:l('List Fee Configurations')}</h4>
            </div>
        </div>
    </div>
    
    <div id="main" class="main">
        <div class="card card-body mt-2 mb-2 table-responsive">
            <div class="d-flex flex-wrap gap-2 tomato-1 mb-1">
				<a class="btn btn-success  " href="{:U('Fees/addFees')}">{:l('Add Coin Fees')}</a>
                <a class="btn btn-info  " href="{:U('Fees/config')}">{:l('Wallet Config')}</a>
					</div>
            
        <form action="#" method="post" id="form">
            <table class="table table-bordered">
                <thead>
                    <tr>
						<th>ID</th>
                        <th>Wallet</th>
                        <th>Coin</th>
                        <th>Fee Coin</th>
                        <th>Out Fee</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <foreach name="entries" item="entry">
                        <tr>
						<td>{$entry.id}</td>
                            <td>{$entry.name}</td>
                            <td>{$entry.coin}</td>
                            <td>{$entry.fee_coin}</td>
                            <td>{$entry.out_fee}</td>
                            <td>
                                <a href="{:U('Fees/addFees', array('id' => $entry['id']))}" class="btn btn-info">Edit</a> | 
								<button class="btn btn-danger delete-btn" data-id="{$entry['id']}">Delete</button>

                            </td>
                        </tr>
                    </foreach>
                </tbody>
            </table>
        </form>
    </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $('.delete-btn').click(function() {
        var id = $(this).data('id'); // Get the ID from the button's data-id attribute
        var url = "{:U('Fees/deleteFeesCoin')}"; // The URL to your delete method

        if(confirm('Are you sure you want to delete this entry?')) {
            $.ajax({
                url: url,
                type: 'POST',
                data: {id: id},
                success: function(data) {
                    if(data.status == 1) {
                        alert('Entry successfully deleted.');
                        // Optionally, remove the entry row from the table or refresh the page
                        // $('#row-' + id).remove(); // Make sure you have a row with an id for this to work
                        location.reload(); // Or reload to update the list
                    } else {
                        alert(data.info); // Show error message from server
                    }
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    alert('Failed to delete the entry.');
                }
            });
        }
    });
});
</script>

<include file="Public:footer" />
