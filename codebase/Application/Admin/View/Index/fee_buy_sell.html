				<div class="col-xl-6" id="fees_chart">
					<div class="card">
						<div class="card-body">
							<h4 class="card-title mb-4">{:l('Buy Sell Fees')}</h4>

							<div id="buy-sell-fees"  data-colors='["--bs-success","--bs-primary", "--bs-danger"]' dir="ltr"></div>

						</div>
					</div>
				</div> <!-- end col -->
			
		
	<script>
		var buySellFees, buySellFeesColors = ['#4a8bc2', '#ff6c60', '#a94442', '#afgh4e']; // Example colors

$(function() {
	function transformBuySellFee(response) {
    var categories = new Set();
    var seriesData = {
        "Fee Buy": {},
        "Fee Sell": {}
    };

    // Process each item in the response
    response.forEach(function(item) {
        // Format the date and add it to the categories set
        var date = new Date(item.date);
        var formattedDate = date.toLocaleString('default', { month: 'short', year: 'numeric' });
        categories.add(formattedDate);
seriesData["Fee Buy"][formattedDate] += item.fee_buy ? parseFloat(item.fee_buy) : 0;
        seriesData["Fee Sell"][formattedDate] += item.fee_sell ? parseFloat(item.fee_sell) : 0;
    });

    // Convert the processed data into the structure needed for ApexCharts
    var finalData = {
        categories: Array.from(categories),
        series: []
    };

    for (var key in seriesData) {
        finalData.series.push({
            name: key,
            data: finalData.categories.map(function(category) {
                return seriesData[key][category];
            })
        });
    }

    return finalData;
}

// Example usage
var response = {$cztx};
var data = transformBuySellFee(response);

console.log(data);

    var options = {
        chart: {
            type: 'bar',
            height: 380
        },
        series: data.series,
        xaxis: {
            categories: data.categories
        },
        yaxis: {
            title: {
                text: 'Amount'
            }
        },
        colors: buySellFeesColors,
        plotOptions: {
            bar: {
                horizontal: false,
                columnWidth: '45%',
                endingShape: 'rounded'
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            show: true,
            width: 2,
            colors: ['transparent']
        },
        grid: {
            borderColor: '#f1f1f1'
        },
        fill: {
            opacity: 1
        },
        tooltip: {
            y: {
                formatter: function(value) {
                    return '$ ' + value;
                }
            }
        }
    };

    buySellFees = new ApexCharts(document.querySelector("#buy-sell-fees"), options);
    buySellFees.render();

    // Handle window resize
    $(window).resize(function() {
        buySellFeesWidth = $("#buy-sell-fees").width();
        buySellFees.resize({
            width: buySellFeesWidth,
            height: 380
        });
    });
});

	</script>