<include file="Public:header"/>
<script type="text/javascript" src="__THEME__/layer/laydate/laydate.js"></script>
<div id="main-content">
	<div id="top-alert" class="fixed alert alert-error" style="display: none;">
		<button class="close fixed" style="margin-top: 4px;">&times;</button>
		<div class="alert-content">Warnings</div>
	</div>
	<div id="main" class="main">
		<div class="main-title-h" style="font-size: 24px;">
			<span class="d-sm-flex align-items-center justify-content-between h4">{$title|htmlspecialchars}</span>
			<if condition="$suggest">({$suggest|htmlspecialchars})</if>
			<present name="Think.get.name">
				<i class="ca"></i>[<a href="{$titleList['url']}"> {$titleList['title']|htmlspecialchars}</a> ]
			</present>
		</div>
	
		<!-- Data table -->
		<if condition="$keyList">
			<div class="card card-body table-responsive mt-2">
				<div class="d-flex flex-wrap gap-2 tomato-1 mb-1">
			<div class="fl">
				
				<present name="buttonList['add']">
					<a class="btn add-btn btn-success" href="{$buttonList['add']['url']}">{:l($buttonList['add']['title'])}</a>
				</present>
				<present name="buttonList['resume']">
					<button class="btn ajax-post btn-info" url="{$buttonList['resume']['url']}" target-form="ids">{:l($buttonList['resume']['title'])}</button>
				</present>
				<present name="buttonList['forbid']">
					<button class="btn ajax-post btn-warning" url="{$buttonList['forbid']['url']}" target-form="ids">{:l($buttonList['forbid']['title'])}</button>
				</present>
				<present name="buttonList['delete']">
					<button class="btn ajax-post confirm delete-btn btn-danger" url="{$buttonList['delete']['url']}" target-form="ids">{:l($buttonList['delete']['title'])}</button>
				</present>
			</div>
			<div class="search-form fr cf">
				<div class="sleft">
					<form action="{$searchPostUrl||default='__SELF__'}" name="formSearch" id="formSearch" method="get" name="form1"  class="d-flex align-items-center">
						<volist name="searches" id="search">
							<if condition="$search['type'] == 'select'">
								<select size="1" name="{$search['name']}" class="search-input form-select form-input-width" class="d-flex align-items-center">
									<volist name="search['attr']" id="svo">
										<php>$search_name=isset($_GET[$search['name']])?$_GET[$search['name']]:''</php>
										<option value="{$key}"
										<eq name="key" value="$search_name">selected</eq>
										>{$svo}</option>
									</volist>
								</select>
								<elseif condition="$search['type'] == 'time'"/>
								<input type="text" class="search-input input-1x" name="{$search.name}" value="{:I($search['name'])}" placeholder="{$search.attr}" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})"></td>
								<else/>
								<input type="text" name="{$search.name}" class="form-control" value="{:I($search['name'])}" placeholder="{$search.attr}" style="width: 150px">
								<a class="sch-btn" href="javascript:;" id="search"> <i class="btn-search"></i> </a></if>
						</volist>
					</form>
					<script>
						//Search function
						$(function () {
							$('#search').click(function () {
								$('#formSearch').submit();
							});
						});
						//Enter search
						$(".search-input").keyup(function (e) {
							if (e.keyCode === 13) {
								$("#search").click();
								return false;
							}
						});
					</script>
				</div>
			</div>
		</div>
				<table class="table table-sm emptyx">
					<thead class="table-light">
					<tr>
						<th class="row-selected row-selected"><input class="check-all" type="checkbox"/></th>
						<volist name="keyList" id="field">
							<th>{:l($field['title'])}</th>
						</volist>
					</tr>
					</thead>
					<tbody>
					<notempty name="list">
						<volist name="list" id="e">
							<tr>
								<td><input class="ids" type="checkbox" name="id[]" value="{$e['id']}"/></td>
								<volist name="keyList" id="field">
									<td class="text-ellipsis">{$e[$field['name']]}</td>
								</volist>
							</tr>
						</volist>
						<else/>
						<td colspan="12" class="text-center">No contents!</td>
					</notempty>
					</tbody>
				</table>
				<div class="page">
					<div>{$pagination}</div>
				</div>
			</div>
		</if>
	</div>
</div>
<include file="Public:footer"/>